import{ag as e,p as a,T as l,k as s,o as t,c as n,w as u,g as o,b as i,q as r,f as p,t as c,j as d,C as v,a as x,h as f,F as m,d as y,aA as k,v as g,u as h,I as _,z as b,a0 as j}from"./index-186a3d71.js";import{_ as w}from"./uni-card.512cf813.js";import{o as F,c as M,t as C,w as I,r as B}from"./api.2104deed.js";import{_ as D,a as T}from"./uni-popup.9679ccda.js";import{_ as A}from"./addRecords.6692fed0.js";import{_ as E}from"./abButton.9e3fdaec.js";import"./abMiniButton.3bbe7994.js";import"./dayjs.min.1da0adf3.js";const L={__name:"orderInfo",setup(L){let N=e("orderId");const P=a({}),q=["正常辣","微辣","特辣"];F((async e=>{e.id&&(N=e.id);let a=await M({id:N});P.value=a[0];let l=await C({orderId:N||"dfs2345"});O.value=l}));const z=a(""),O=a([]);l((()=>{if(!s())try{document.getElementsByClassName("uni-page-head-btn")[0].style.display="none"}catch(e){}}));const R=a(null),G=async()=>{if(z.value)return R.value.open();let e=await I({orderId:N});console.log(e),z.value=e,R.value.open()},H=()=>{console.log(z.value),k({filePath:z.value,success:e=>{g({title:"保存成功",icon:"success",mask:!0}),R.value.close()},fail:e=>{console.log(e),h({title:"失败",content:e.errMsg,showCancel:!0,success:({confirm:e,cancel:a})=>{}}),R.value.close()}})};return(e,a)=>{const l=_("abEmpty"),k=B(b("uni-card"),w),g=j,h=B(b("uni-popup-dialog"),D),F=B(b("uni-popup"),T),M=o;return t(),n(M,null,{default:u((()=>[!P.value.isFinish&&P.value.takeMeal?(t(),i("div",{key:0,class:"px-[12px] pt-[12px] text-center"},[r("p",null,[p(" 订单正在准备中，您的取餐号是:"),r("span",{class:"text-text3 text-16 font-bold"},c(P.value.takeMeal),1)])])):d("",!0),v(s)()?(t(),i("div",{key:1,class:"p-[12px] px-[16px]"},[x(E,{icon:"link",onClick:G},{default:u((()=>[p("为此订单生成网址二维码")])),_:1})])):d("",!0),x(k,null,{default:u((()=>{var e,a;return[r("div",{class:"text-12"},[r("div",{class:"grid grid-cols-2"},[r("span",null,"订单名："+c(P.value.orderName),1),r("span",null,[p("订单状态："),r("span",{class:f(P.value.isFinish?"text-text5":"text-text3")},c(P.value.isFinish?"已完成":"未完成"),3)]),r("span",null,"口味："+c(q[P.value.taste-1]),1),P.value.desk?(t(),i("span",{key:0},"桌位："+c(P.value.desk),1)):d("",!0),r("span",null,"是否打包："+c(P.value.isPack?"打包":"未打包"),1),r("span",null,"是否有加菜："+c(P.value.isAddMenu?"有":"无"),1),r("span",null,"下单方式："+c(P.value.userOperation?"客户自助":"管理员"),1),r("span",null,[p("订单金额："),r("span",{class:"text-text3 text-14"},c(null==(e=P.value.totalMoney)?void 0:e.toFixed(2)),1)]),P.value.isFinish?(t(),i("span",{key:1},[p("实收金额："),r("span",{class:"text-text3 text-14"},c((P.value.actualMoney||P.value.totalMoney).toFixed(2)),1)])):d("",!0),r("span",null,"商品总数："+c(P.value.totalCount),1)]),r("p",null,"订单ID："+c(P.value.id),1),r("p",null,"创建时间："+c(P.value.showTime),1),r("p",{class:"text-16 text-center my-[12px]"},"商品明细清单"),(null==(a=P.value.orderDetail)?void 0:a.length)?(t(),i("div",{key:0},[r("ul",null,[r("li",{class:"grid grid-cols-4 text-center py-[4px] font-bold"},[r("span",null,"名称"),r("span",null,"单价"),r("span",null,"数量"),r("span",null,"小记")]),(t(!0),i(m,null,y(P.value.orderDetail,(e=>(t(),i("li",{key:e.id,class:"grid grid-cols-4 text-center py-[4px]",style:{"border-bottom":"1px solid var(--border_c)"}},[r("span",null,c(e.name),1),r("span",null,c(e.price.toFixed(2)),1),r("span",null,c(e.count),1),r("span",{class:"text-text3"},c((e.price*e.count).toFixed(2)),1)])))),128))])])):(t(),n(l,{key:1,text:"暂无数据"})),O.value.length>1?(t(),n(A,{key:2,recordsList:O.value},null,8,["recordsList"])):d("",!0)])]})),_:1}),x(F,{ref_key:"popup2",ref:R,type:"dialog"},{default:u((()=>[x(h,{title:"订单二维码",confirmText:"保存二维码",duration:2e3,"before-close":!0,onClose:a[0]||(a[0]=e=>R.value.close()),onConfirm:H},{default:u((()=>[r("div",{class:"flex justify-center w-full"},[x(g,{src:z.value,class:"w-full"},null,8,["src"])])])),_:1})])),_:1},512)])),_:1})}}};export{L as default};
