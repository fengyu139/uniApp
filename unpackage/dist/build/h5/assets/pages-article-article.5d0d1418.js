import{p as e,s as a,o as l,c as t,w as s,g as n,a as o,f as i,b as c,d as u,t as p,j as r,F as d,D as f,ai as m,y as _,G as x,A as y,i as k}from"./index-19c1b97d.js";import{_ as b}from"./uni-easyinput.14cdf379.js";import{b as v,D as j,E as C,r as g}from"./api.4fcc0fa2.js";import{_ as h,a as w}from"./uni-collapse.efe7400e.js";import{_ as V}from"./abButton.59240c6e.js";import{_ as B}from"./abMiniButton.f970023c.js";function E(e){const a=e.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","bmp","webp"].includes(a)}const A={__name:"article",setup(A){const D=e([{title:"",content:"",createTime:"",files:[]}]),I=e(""),T=()=>{F()},F=async()=>{let e=await j({searchValue:I.value});D.value=e};F();const G=()=>{_({url:"/pages/article/addArticle"})};v((async()=>{I.value="",await F(),a()}));return(e,a)=>{const _=g(y("uni-easyinput"),b),v=n,j=k,A=g(y("uni-collapse-item"),h),F=g(y("uni-collapse"),w);return l(),t(v,{class:"p-[16px]"},{default:s((()=>[o(v,{class:"flex items-center"},{default:s((()=>[o(_,{clearable:"",prefixIcon:"search",confirmType:"搜索",modelValue:I.value,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value=e),onBlur:T,placeholder:"请输入关键字"},null,8,["modelValue"]),o(V,{icon:"plusempty",onClick:G,class:"ml-[10px]"},{default:s((()=>[i("添加")])),_:1})])),_:1}),o(v,null,{default:s((()=>[o(F,null,{default:s((()=>[(l(!0),c(d,null,u(D.value,((e,a)=>(l(),t(A,{key:a,class:"text-center","show-animation":!0,title:e.title},{default:s((()=>[o(v,{class:"pb-[10px]"},{default:s((()=>[e.content?(l(),t(v,{key:0,class:"text-left relative"},{default:s((()=>[o(j,null,{default:s((()=>[i(p(e.content),1)])),_:2},1024)])),_:2},1024)):r("",!0),o(v,{class:"mt-[8px]",style:{border:"1px solid #eee"}},{default:s((()=>[(l(!0),c(d,null,u(e.files,(e=>(l(),t(v,{class:"flex mb-[4px]",key:e},{default:s((()=>[o(j,null,{default:s((()=>[i(p(f(E)(e)?"图片":"文件")+"-",1)])),_:2},1024),o(j,null,{default:s((()=>[i(p(e.slice(e.lastIndexOf("/")+1,e.length)),1)])),_:2},1024),f(E)(e)?(l(),t(B,{key:0,type:"default",onClick:a=>{x({urls:[e]})}},{default:s((()=>[i("预览")])),_:2},1032,["onClick"])):r("",!0),o(B,{type:"default",onClick:a=>(e=>{{let a=document.createElement("a");a.href=e,a.click()}})(e)},{default:s((()=>[i("下载")])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:2},1024),o(v,{class:"text-text3 flex"},{default:s((()=>[o(B,{icon:"copy",class:"bottom-[-3px]",onClick:a=>{return l=e.content,void m({data:l});var l}},{default:s((()=>[i(" 复制文本")])),_:2},1032,["onClick"]),o(B,{icon:"copy",class:"bottom-[-3px]",onClick:a=>(async e=>{await C({id:e}),D.value.forEach(((a,l)=>{a._id==e&&D.value.splice(l,1)}))})(e._id)},{default:s((()=>[i(" 删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["title"])))),128))])),_:1})])),_:1})])),_:1})}}};export{A as default};
